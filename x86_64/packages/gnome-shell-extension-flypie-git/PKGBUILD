pkgname=gnome-shell-extension-flypie-git
pkgdesc="Fly-Pie - an innovative marking menu written as a GNOME Shell extension."
pkgver=r1530.dafe2af
pkgrel=1
_gitname=Fly-Pie
arch=('any')
url="https://github.com/Schneegans/Fly-Pie"
license=("GPLv3")
install="flypie.install"
depends=('gnome-shell')
makedepends=('make' 'git')

_dir="${_gitname}"
source=("git+https://github.com/Schneegans/Fly-Pie.git")
sha256sums=("SKIP")

pkgver() {
    cd "${srcdir}/${_dir}"
    printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

package() {
    cd "${srcdir}/${_dir}"
    make install

    install -Dm644 schemas/org.gnome.shell.extensions.flypie.gschema.xml -t "$pkgdir/usr/share/glib-2.0/schemas"
}
